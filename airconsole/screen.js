!function(t){function e(r){if(i[r])return i[r].exports;var o=i[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};e.m=t,e.c=i,e.p="/",e(0)}([function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=i(9),n=r(o),s=i(16),a=r(s);i(13),i(12);var l=window.ga,u=l(768,800,function(){u.canvas.style.border="2px black solid",u.canvas.style.display="block",u.canvas.style.margin="auto",u.backgroundColor="white",u.sfx=new a.default,u.airconsole=new AirConsole,u.state=(0,n.default)(u)});u.start()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={blank:{stroke:"#000000",fill:"#ffffff",light:"#ffffff"},blue:{stroke:"#0000ff",fill:"#0088ff",light:"#add8e6"},red:{stroke:"#000000",fill:"#ff0000",light:"#ff7f7f"},yellow:{stroke:"#000000",fill:"#fff000",light:"#fafad2"},green:{stroke:"#000000",fill:"#4cff00",light:"#bfff7f"}}},function(t,e){"use strict";function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(){n=[]}function o(t,e){var r=i({},e,{up:{press:function(){},release:function(){}},down:{press:function(){},release:function(){}},left:{press:function(){},release:function(){}},right:{press:function(){},release:function(){}},action:{press:function(){},release:function(){}}});return n.push(r),t.airconsole.onMessage=function(t,e){var i=t,r=e.substr(0,e.indexOf("-")),o=e.substr(e.indexOf("-")+1);n.forEach(function(t){t[i]&&t[i][o][r]()})},r[e]}Object.defineProperty(e,"__esModule",{value:!0}),e.resetControls=r,e.getPlayerControls=o;var n=[]},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=e.ANTI_COLLISION_FRAMES=2,n=function(){function t(e,r){if(i(this,t),!e.getAutoIncrementedId){var o=0;e.getAutoIncrementedId=function(){return o+=1}}e.collisionGroups||(e.collisionGroups={}),e.collisionGroups[r]||(e.collisionGroups[r]=[]),this.id=e.getAutoIncrementedId(),e.collisionGroups[r].push(this),this.name=r,this.collidesWith=[],this.antiCollisionFrames=[],this.g=e,e.things||(e.things=[]),e.things.push(this)}return r(t,[{key:"getPreviousPosition",value:function(){return{x:this.sprite.x-this.sprite.vx,y:this.sprite.y-this.sprite.vy}}},{key:"handleCollisions",value:function(){var t=this,e=this.g;this.collidesWith.forEach(function(i){e.collisionGroups[i].forEach(function(i){t.sprite&&t.sprite.visible&&i.sprite&&i.sprite.visible&&t.sprite!==i.sprite&&e.hitTestRectangle(t.sprite,i.sprite)&&!t.antiCollisionFrames[i.id]&&!i.antiCollisionFrames[t.id]&&(t.antiCollisionFrames[i.id]=o,i.antiCollisionFrames[t.id]=o,t.handleCollision(i),i.handleCollision(t))})})}},{key:"handleCollision",value:function(t){}},{key:"remove",value:function(){this.sprite&&this.g.remove(this.sprite)}},{key:"updateAntiCollisionFrames",value:function(){var t=this;Object.keys(this.antiCollisionFrames).forEach(function(e){t.antiCollisionFrames[e]-=1,0===t.antiCollisionFrames[e]&&delete t.antiCollisionFrames[e]})}},{key:"update",value:function(){this.updateAntiCollisionFrames(),this.sprite&&this.handleCollisions()}}]),t}();e.default=n},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e){i(this,t),this.g=e,this.texts=[]}return r(t,[{key:"clear",value:function(){this.g.remove(this.texts)}},{key:"createText",value:function(t,e,i,r,o){var n=this.g.text(t,e+"px monospace",i,r,o);return this.texts.push(n),n}},{key:"centeredTexts",value:function(t,e,i,r,o){var n=this.g,s=.2*e,a=1===t.length?t[0].length:t.reduce(function(t,e){return t.length>e.length?t.length:e.length}),l=t.map(function(t,l){return n.text(t,e+"px monospace",i,n.stage.halfWidth-a/2*((e+s)/2),r+o*l)});return this.texts.push.apply(this.texts,l),l}},{key:"centeredText",value:function(t,e,i,r){var o=.2*e,n=this.g,s=n.text(t,e+"px monospace",i,n.stage.halfWidth-t.length/2*((e+o)/2),r);return this.texts.push(s),s}}]),t}();e.default=o},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MODS=e.MAX_BALL_V=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=i(3),u=r(l),c=i(10),h=r(c),f=i(1),p=r(f),d=i(11),g=r(d),v=i(7),y=r(v),b=i(6),m=e.MAX_BALL_V=5,w={stickyball:"#ffaa00",powerball:"#b50000",growball:"#00bb01",shrinkball:"#ff69b4",mirrorball:"#9370db",asteroidball:"#00cdcd"},x=(e.MODS=Object.keys(w),function(t){function e(t,i){o(this,e);var r=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"ball"));return r.color=i,r.mod=null,r.createSprite(),r.edgeBounces=0,r.collidesWith=["paddle","block","pit"],r.mirroring=null,r}return s(e,t),a(e,[{key:"changeMod",value:function(t){this.mod=t,this.mirroring=null}},{key:"createSprite",value:function(){this.sprite=this.g.circle(8,p.default[this.color].fill,this.mod?w[this.mod]:p.default[this.color].stroke,this.mod?12:3),"asteroidball"===this.mod&&this.g.collisionGroups.hud&&this.g.collisionGroups.hud[0].recreateSprites()}},{key:"recreateSprite",value:function(){var t=this.sprite;this.remove(),this.createSprite(),this.sprite.x=t.x,this.sprite.y=t.y,this.sprite.vx=t.vx,this.sprite.vy=t.vy}},{key:"bounceOffBounds",value:function(){if(!this.antiCollisionFrames.border&&!this.isCaught()){var t=!1;(this.sprite.x<=0&&this.sprite.vx<0||this.sprite.x>=this.g.stage.width-this.sprite.width&&this.sprite.vx>0)&&(this.sprite.vx*=-1,t=!0),(this.sprite.y<=b.HUD_HEIGHT&&this.sprite.vy<0||this.sprite.y>=this.g.stage.height-this.sprite.height&&this.sprite.vy>0)&&(this.sprite.vy*=-1,t=!0),t&&(this.antiCollisionFrames.border=l.ANTI_COLLISION_FRAMES,this.edgeBounces+=1),t&&this.edgeBounces>=2&&"blank"!==this.color?(this.changeColor("blank"),this.edgeBounces=0,this.mirroring=null,this.g.sfx.play("hit4")):t&&this.g.sfx.play("hit3")}}},{key:"screenWrap",value:function(){this.screenWrappedLastFrame&&(this.sprite.visible=!0,this.screenWrappedLastFrame=!1);var t=[this.sprite.x,this.sprite.y];this.sprite.x<-1*this.sprite.width&&(this.sprite.x=this.g.stage.width),this.sprite.x>this.g.stage.width&&(this.sprite.x=-1*this.sprite.width),this.sprite.y<b.HUD_HEIGHT+-1*this.sprite.height&&(this.sprite.y=this.g.stage.height),this.sprite.y>this.g.stage.height&&(this.sprite.y=b.HUD_HEIGHT-this.sprite.height),t[0]===this.sprite.x&&t[1]===this.sprite.y||(this.sprite.visible=!1,this.screenWrappedLastFrame=!0)}},{key:"releaseFromPit",value:function(t){this.g.sfx.play("pit2"),this.createSprite();var e=[this.g.randomInt(2,3),this.g.randomInt(2,3)];switch(e[this.g.randomInt(0,1)]=m,t.position){case"TOP LEFT":this.sprite.x=t.sprite.x+t.sprite.halfWidth,this.sprite.y=t.sprite.y+t.sprite.halfHeight,this.sprite.vx=e[0],this.sprite.vy=e[1];break;case"TOP RIGHT":this.sprite.x=t.sprite.x-t.sprite.halfWidth,this.sprite.y=t.sprite.y+t.sprite.halfHeight,this.sprite.vx=-1*e[0],this.sprite.vy=e[1];break;case"BOTTOM LEFT":this.sprite.x=t.sprite.x+t.sprite.halfWidth,this.sprite.y=t.sprite.y-t.sprite.halfHeight,this.sprite.vx=e[0],this.sprite.vy=-1*e[1];break;case"BOTTOM RIGHT":this.sprite.x=t.sprite.x-t.sprite.halfWidth,this.sprite.y=t.sprite.y-t.sprite.halfHeight,this.sprite.vx=-1*e[0],this.sprite.vy=-1*e[1];break;default:throw this.g.pause(),new Error("Invalid pit position: "+t.position)}this.antiCollisionFrames[t.id]=10}},{key:"changeColor",value:function(t){this.color=t,this.recreateSprite()}},{key:"bounceOffPaddle",value:function(t){var e=this,i=e.getPreviousPosition(),r=t.getPreviousPosition();e.edgeBounces=0;for(var o=Math.floor(t.length/12),n=t.length-12*o,s=[],a=1;a<=6;a+=1)s.push({lower:1===a?-1/0:o*(a-1),upper:o*a,v:-7+a});var l={lower:6*o,upper:6*o+n,v:0};s.push(l);for(var u=1;u<=6;u+=1)s.push({lower:l.upper+o*(u-1),upper:6===u?1/0:l.upper+o*u,v:u});var c=["top","bottom"].indexOf(t.position)>-1?i.x+e.sprite.halfWidth-r.x:i.y+e.sprite.halfHeight-r.y,h=null;if(s.forEach(function(t,e){null===h&&c>=t.lower&&c<t.upper&&(h=e)}),null===h)return void console.log("Could not find hit area for pixel",c);var f=["top","bottom"].indexOf(t.position)>-1?"vx":"vy",p="vy"===f?"vx":"vy",d="asteroidball"===e.mod?e.sprite[p]>0?-1*m:m:["top","left"].indexOf(t.position)>-1?m:-1*m;e.sprite[f]=s[h].v,e.sprite[p]=d,this.g.sfx.play("hit2")}},{key:"bounceOff",value:function(t){var e=this,i=e.getPreviousPosition(),r=t.getPreviousPosition();t instanceof g.default&&t.color!==this.color&&this.changeColor(t.color);var o=null;if(i.y+e.sprite.height<=r.y)o="top";else if(i.x+e.sprite.width<=r.x)o="left";else if(i.y>=r.y+t.sprite.height)o="bottom";else{if(!(i.x>=r.x+t.sprite.width))return;o="right"}t instanceof g.default?this.bounceOffPaddle(t):(this.g.sfx.play("hit1"),"left"===o||"right"===o?(e.sprite.vx*t.sprite.vx>0?e.sprite.vx+=t.sprite.vx:e.sprite.vx=-1*e.sprite.vx+t.sprite.vx,e.sprite.vy+=t.sprite.vy,e.sprite.vx=Math.min(Math.abs(e.sprite.vx),m)*(e.sprite.vx<0?-1:1),e.sprite.vy=Math.min(Math.abs(e.sprite.vy),m)*(e.sprite.vy<0?-1:1)):(e.sprite.vy*t.sprite.vy>0?e.sprite.vy+=t.sprite.vy:e.sprite.vy=-1*e.sprite.vy+t.sprite.vy,e.sprite.vx+=t.sprite.vx,e.sprite.vy=Math.min(Math.abs(e.sprite.vy),m)*(e.sprite.vy<0?-1:1),e.sprite.vx=Math.min(Math.abs(e.sprite.vx),m)*(e.sprite.vx<0?-1:1)))}},{key:"isCaught",value:function(){var t=this;return this.g.collisionGroups.paddle.reduce(function(e,i){return e||i.caughtBall===t},!1)}},{key:"handleCollision",value:function(t){t instanceof g.default||t instanceof h.default&&"blank"!==t.color&&t.color!==this.color?t instanceof g.default&&"stickyball"===this.mod&&!t.caughtBall?(t.attachBall(this),this.changeMod(null),this.color=t.color,this.edgeBounces=0,this.recreateSprite()):t instanceof h.default&&"powerball"===this.mod||(t instanceof g.default&&"mirrorball"===this.mod&&(this.mirroring=t.position),this.bounceOff(t)):t instanceof y.default&&(this.remove(),this.sprite=null)}},{key:"setMirrorDirection",value:function(t){this.mirroring&&("top"===this.mirroring||"bottom"===this.mirroring?this.sprite.vx=m*t:this.sprite.vy=m*t)}},{key:"update",value:function(){this.updateAntiCollisionFrames(),this.sprite&&("asteroidball"===this.mod?this.screenWrap():this.bounceOffBounds()),this.handleCollisions(),this.sprite&&this.g.move(this.sprite)}}]),e}(u.default));e.default=x},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.HUD_HEIGHT=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function t(e,i,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var n=Object.getPrototypeOf(e);return null===n?void 0:t(n,i,r)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(r)},u=i(3),c=r(u),h=i(1),f=r(h),p=90,d=e.HUD_HEIGHT=32,g=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var r=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"hud"));if(r.createSprites(),"function"!=typeof i.onTimerReachesZero)throw t.pause(),new"Must specify onTimerReachesZero callback";return r.onTimerReachesZero=i.onTimerReachesZero,r.timerFrames=(p+1)*r.g.fps,r}return s(e,t),a(e,[{key:"createSprites",value:function(){var t=this,e=this.g;this.sprite=e.rectangle(768,d-1,"#aaaaaa","#000000",0,0),this.timerText=e.text(Math.ceil(this.timerFrames/this.g.fps),"24px monospace","#ffffff",this.g.stage.halfWidth-12,0);var i=[64,672,532,208];this.scores={},Object.keys(this.g.globals.roundScore).forEach(function(r,o){t.scores[r]=e.text(e.globals.roundScore[r].toString(),"24px monospace",f.default[r].fill,i[o],0)})}},{key:"recreateSprites",value:function(){this.remove(),this.createSprites()}},{key:"updateScoreText",value:function(){var t=this;Object.keys(this.g.globals.roundScore).forEach(function(e){t.scores[e].content=t.g.globals.roundScore[e].toString()})}},{key:"updateTimerText",value:function(){this.timerText.content=Math.floor(this.timerFrames/this.g.fps)}},{key:"remove",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this),this.g.remove(this.timerText),Object.keys(this.scores).forEach(function(e){t.g.remove(t.scores[e])})}},{key:"isTie",value:function(){var t=this.g.globals.roundScore,e=Object.keys(t).map(function(e){return{color:e,score:t[e]}}).sort(function(t,e){return e.score-t.score});return e[0].score===e[1].score}},{key:"update",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),this.updateScoreText(),0===this.timerText.content?this.isTie()||this.onTimerReachesZero():(this.timerFrames-=1,this.updateTimerText())}}]),e}(c.default);e.default=g},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PIT_SIZE=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function t(e,i,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var n=Object.getPrototypeOf(e);return null===n?void 0:t(n,i,r)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(r)},u=i(3),c=r(u),h=i(5),f=r(h),p=i(6),d=e.PIT_SIZE=16,g=function(t){function e(t,i){o(this,e);var r=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"pit")),s=void 0,a=void 0;switch(i){case"TOP LEFT":s=0,a=p.HUD_HEIGHT;break;case"TOP RIGHT":s=t.stage.width-d,a=p.HUD_HEIGHT;break;case"BOTTOM LEFT":s=0,a=t.stage.height-d;break;case"BOTTOM RIGHT":s=t.stage.width-d,a=t.stage.height-d;break;default:throw t.pause(),new Error("Invalid pit position: "+i)}return r.sprite=t.rectangle(d,d,"#000000","#000000",0,s,a),r.position=i,r.lostBallTimers=[],r}return s(e,t),a(e,[{key:"handleCollision",value:function(t){t instanceof f.default&&(this.g.sfx.play("pit1"),this.lostBallTimers.push({ball:t,frames:this.g.fps*this.g.randomInt(1,3)}))}},{key:"releaseModifiedBall",value:function(t){t.changeMod(h.MODS[this.g.randomInt(0,h.MODS.length-1)]);var e=this.g.collisionGroups.pit[this.g.randomInt(0,this.g.collisionGroups.pit.length-1)];t.releaseFromPit(e)}},{key:"update",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),this.lostBallTimers.forEach(function(e,i){e.frames-=1,0===e.frames&&(t.releaseModifiedBall(e.ball),delete t.lostBallTimers[i])})}}]),e}(c.default);e.default=g},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),n=r(o),s=i(10),a=r(s),l=i(6),u=r(l),c=i(11),h=r(c),f=i(7),p=r(f),d=i(2),g=i(17),v=r(g);e.default=function(t){(0,d.resetControls)(),t.things=[],t.collisionGroups={};for(var e=[],i=128;i<=608;i+=32)for(var r=128+l.HUD_HEIGHT;r<=608+l.HUD_HEIGHT;r+=32)e.push(new a.default(t,{x:i,y:r}));var o=[];1===t.globals.players?(o=[{position:"bottom",color:"blue",player:1},{position:"right",color:"red",player:1},{position:"top",color:"yellow",player:1},{position:"left",color:"green",player:1}],o[t.randomInt(0,3)].startWithBall=!0):2===t.globals.players?(o=[{position:"bottom",color:"blue"},{position:"top",color:"blue"},{position:"left",color:"red"},{position:"right",color:"red"}],2===t.globals.players?(o[0].player=1,o[1].player=1,o[2].player=2,o[3].player=2):t.globals.teams&&(o[0].player=1,o[1].player=2,o[2].player=3,o[3].player=4),o[t.randomInt(0,1)].startWithBall=!0,o[t.randomInt(2,3)].startWithBall=!0):4===t.globals.players&&(t.globals.teams?(o=[{position:"bottom",color:"blue",player:1},{position:"right",color:"blue",player:2},{position:"top",color:"red",player:3},{position:"left",color:"red",player:4}],o[t.randomInt(0,1)].startWithBall=!0,o[t.randomInt(2,3)].startWithBall=!0):o=[{position:"bottom",color:"blue",player:1,startWithBall:!0},{position:"right",color:"red",player:2,startWithBall:!0},{position:"top",color:"yellow",player:3,startWithBall:!0},{position:"left",color:"green",player:4,startWithBall:!0}]),t.globals.roundScore={},o.forEach(function(e){t.globals.roundScore[e.color]||(t.globals.roundScore[e.color]=0)}),t.globals.roundsWon=Object.assign({},t.globals.roundScore,t.globals.roundsWon||{}),o.forEach(function(e){var i=new h.default(t,e);if(e.startWithBall){var r=new n.default(t,e.color);i.attachBall(r)}});new u.default(t,{onTimerReachesZero:function(){t.state=(0,v.default)(t)}});return new p.default(t,"TOP LEFT"),new p.default(t,"TOP RIGHT"),new p.default(t,"BOTTOM LEFT"),new p.default(t,"BOTTOM RIGHT"),function(){t.things.forEach(function(t){return t.update()})}}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n=i(8),s=r(n),a=i(4),l=r(a),u=i(15),c=(r(u),function(t){for(var e=t.getControllerDeviceIds(),i=1;i<=Math.min(e.length,4);i+=1)1===i?t.message(1,{controller:"MainMenu",props:{activePlayers:e.length}}):t.message(i,{controller:"Waiting"})}),h=function(t,e){var i=t.getActivePlayerDeviceIds(),r=t.getControllerDeviceIds();i.length<r.length&&t.setActivePlayers(r.length),c(t)};e.default=function(t){(0,o.resetControls)(),c(t.airconsole),t.airconsole.onConnect=function(e){h(t.airconsole)},t.airconsole.onDisconnect=function(e){h(t.airconsole)};var e=new l.default(t);e.centeredText("Splat Paddlers!",64,"#000000",20);return t.airconsole.onMessage=function(i,r){t.airconsole.getActivePlayerDeviceIds();switch(r){case"1-player":t.globals={players:1},e.clear(),t.state=(0,s.default)(t),t.airconsole.message(1,{controller:"AdvancedController"});break;case"2-players":t.globals={players:2},e.clear(),t.state=(0,s.default)(t),t.airconsole.message(1,{controller:"SimpleController",props:{orientation:"horizontal"}}),t.airconsole.message(2,{controller:"SimpleController",props:{orientation:"vertical"}});break;case"4-players-teams":t.globals={players:4,teams:!0},e.clear(),t.state=(0,s.default)(t);break;case"4-players-vs":t.globals={players:4,teams:!1},e.clear(),t.state=(0,s.default)(t)}4===t.globals.players&&(t.airconsole.message(1,{controller:"SimpleController",props:{orientation:"horizontal"}}),t.airconsole.message(2,{controller:"SimpleController",props:{orientation:"vertical"}}),t.airconsole.message(3,{controller:"SimpleController",props:{orientation:"horizontal"}}),t.airconsole.message(4,{controller:"SimpleController",props:{orientation:"vertical"}}))},function(){}}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=i(3),u=r(l),c=i(5),h=r(c),f=i(1),p=r(f),d=function(t){function e(t,i){o(this,e);var r=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"block"));return r.color="blank",r.position=i,r.preDrawAllSprites(),r}return s(e,t),a(e,[{key:"preDrawAllSprites",value:function(){var t=this,e=["blank","blue","red"];this.sprites={},4!==this.g.globals.player&&this.g.globals.teams||e.push("green","yellow"),e.forEach(function(e){t.sprites[e]=t.g.rectangle(31,31,p.default[e].light,p.default[e].stroke,1,t.position.x,t.position.y),e!==t.color?t.sprites[e].visible=!1:t.sprite=t.sprites[e]}),this.sprites.blank.alpha=0}},{key:"changeColor",value:function(t){this.sprites[this.color].visible=!1,this.sprites[t].visible=!0,this.sprite=this.sprites[t],this.color=t}},{key:"remove",value:function(){var t=this;Object.keys(this.sprites).forEach(function(e){t.g.remove(t.sprites[e])})}},{key:"handleCollision",value:function(t){if(t instanceof h.default){var e=t;"blank"===this.color&&"blank"!==e.color&&(this.g.globals.roundScore[e.color]+=1,this.changeColor(e.color)),this.color!==e.color&&("blank"!==this.color&&(this.g.globals.roundScore[this.color]-=1),"blank"!==e.color&&(this.g.globals.roundScore[e.color]+=1),this.changeColor(e.color))}}}]),e}(u.default);e.default=d},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PAD_HEIGHT=e.PAD_LEN=e.BOTTOM=e.TOP=e.RIGHT=e.LEFT=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function t(e,i,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var n=Object.getPrototypeOf(e);return null===n?void 0:t(n,i,r)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(r)},u=i(3),c=r(u),h=i(5),f=r(h),p=i(1),d=r(p),g=i(2),v=i(6),y=i(7),b=e.LEFT="left",m=e.RIGHT="right",w=e.TOP="top",x=e.BOTTOM="bottom",_=e.PAD_LEN=64,k=e.PAD_HEIGHT=12,O=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var r=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"paddle"));switch(i.length||(i.length=_),r.length=i.length,r.position=i.position,r.color=i.color,r.player=i.player,r.createSprite(),i.position){case w:t.stage.putTop(r.sprite,16,v.HUD_HEIGHT+r.sprite.height);break;case m:t.stage.putRight(r.sprite,-1*r.sprite.width,v.HUD_HEIGHT-32);break;case x:t.stage.putBottom(r.sprite,-16,-1*r.sprite.height);break;case b:t.stage.putLeft(r.sprite,r.sprite.width,v.HUD_HEIGHT);break;default:throw r.g.pause(),new Error("invalid position")}return r.antiCollisionFrames={},r.initInput(),r}return s(e,t),a(e,[{key:"attachBall",value:function(t){this.caughtBall=t,this.handleCaughtBall()}},{key:"createSprite",value:function(){this.sprite=this.g.rectangle([w,x].indexOf(this.position)>-1?this.length:k,[w,x].indexOf(this.position)>-1?k:this.length,d.default[this.color].fill,d.default[this.color].stroke,2)}},{key:"recreateSprite",value:function(){var t=this.sprite;this.remove(),this.createSprite(),this.sprite.x=t.x,this.sprite.y=t.y,this.sprite.vx=t.vx,this.sprite.vy=t.vy}},{key:"getMirroringBall",value:function(){var t=this;return this.g.collisionGroups.ball.find(function(e){return e.mirroring===t.position&&e.sprite})}},{key:"applyToMirroredBall",value:function(t){var e=this.getMirroringBall();e&&e.setMirrorDirection(t)}},{key:"initVerticalControls",value:function(){var t=this;this.controls.up.press=function(){t.upArrowDown=!0,t.applyToMirroredBall(-1),t.sprite.vy=-8},this.controls.up.release=function(){t.upArrowDown=!1,t.controls.down.isDown||(t.sprite.vy=0)},this.controls.down.press=function(){t.downArrowDown=!0,t.applyToMirroredBall(1),t.sprite.vy=8},this.controls.down.release=function(){t.downArrowDown=!1,t.controls.up.isDown||(t.sprite.vy=0)}}},{key:"initHorizontalControls",value:function(){var t=this;this.controls.right.press=function(){t.rightArrowDown=!0,t.applyToMirroredBall(1),t.sprite.vx=8},this.controls.right.release=function(){t.rightArrowDown=!1,t.controls.left.isDown||(t.sprite.vx=0)},this.controls.left.press=function(){t.applyToMirroredBall(-1),t.leftArrowDown=!0,t.sprite.vx=-8},this.controls.left.release=function(){t.leftArrowDown=!1,t.controls.right.isDown||(t.sprite.vx=0)}}},{key:"initInput",value:function(){var t=this;this.controls=(0,g.getPlayerControls)(this.g,this.player),[w,x].indexOf(this.position)>-1&&this.initHorizontalControls(),[b,m].indexOf(this.position)>-1&&this.initVerticalControls(),this.controls.action.press=function(){t.caughtBall&&t.releaseBall()}}},{key:"releaseBall",value:function(){if(this.caughtBall){switch(this.position){case x:this.caughtBall.sprite.vy=-1*h.MAX_BALL_V,this.caughtBall.sprite.vx=this.sprite.vx;break;case w:this.caughtBall.sprite.vy=h.MAX_BALL_V,this.caughtBall.sprite.vx=this.sprite.vx;break;case b:this.caughtBall.sprite.vy=this.sprite.vy,this.caughtBall.sprite.vx=h.MAX_BALL_V;break;case m:this.caughtBall.sprite.vy=this.sprite.vy,this.caughtBall.sprite.vx=-1*h.MAX_BALL_V}this.caughtBall=null}}},{key:"handleCaughtBall",value:function(){if(this.caughtBall){if(!this.caughtBall.sprite)return void(this.caughtBall=null);switch(this.caughtBall.sprite.vx=0,this.caughtBall.sprite.vy=0,this.position){case w:this.sprite.putBottom(this.caughtBall.sprite);break;case b:this.sprite.putRight(this.caughtBall.sprite);break;case x:this.sprite.putTop(this.caughtBall.sprite);break;case m:this.sprite.putLeft(this.caughtBall.sprite)}}}},{key:"handleCollision",value:function(t){t instanceof f.default&&("growball"===t.mod?(this.length=Math.min(this.length+8,256),this.recreateSprite()):"shrinkball"===t.mod&&(this.length=Math.max(this.length-8,16),this.recreateSprite()))}},{key:"update",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this);var t=this.g;t.move(this.sprite),this.handleCaughtBall();var i=Object.assign({},t.stage.localBounds);this.position===w||this.position===x?(i.x=y.PIT_SIZE,i.width-=y.PIT_SIZE):this.position!==b&&this.position!==m||(i.y=y.PIT_SIZE+v.HUD_HEIGHT,i.height-=y.PIT_SIZE),t.contain(this.sprite,i)}}]),e}(c.default);e.default=O},function(t,e){GA.custom=function(t){function e(t){t.x+=0|t.vx,t.y+=0|t.vy}t.move=function(t){if(t instanceof Array==!1)e(t);else for(var i=0;i<t.length;i++)e(t[i])},t.randomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.wait=function(t,e){return setTimeout(e,t)},t.contain=function(t,e,i,r){var o=e.x,n=e.y,s=e.width,a=e.height;i=i||!1;var l;return t.x<o&&(i&&(t.vx*=-1),t.mass&&(t.vx/=t.mass),t.x=o,l="left"),t.y<n&&(i&&(t.vy*=-1),t.mass&&(t.vy/=t.mass),t.y=n,l="top"),t.x+t.width>s&&(i&&(t.vx*=-1),t.mass&&(t.vx/=t.mass),t.x=s-t.width,l="right"),t.y+t.height>a&&(i&&(t.vy*=-1),t.mass&&(t.vy/=t.mass),t.y=a-t.height,l="bottom"),l&&r&&r(l),l},t.hitTestRectangle=function(t,e,i){var r,o,n,s;return void 0===i&&(i=!1),!1,i?(n=t.gx+t.halfWidth-(e.gx+e.halfWidth),s=t.gy+t.halfHeight-(e.gy+e.halfHeight)):(n=t.centerX-e.centerX,s=t.centerY-e.centerY),r=t.halfWidth+e.halfWidth,o=t.halfHeight+e.halfHeight,Math.abs(n)<r&&Math.abs(s)<o}}},function(t,e){var i=i||{};i.VERSION="0.0.1",i.plugins=void 0,i.custom=void 0,i.create=function(t,e,r,o,n){function s(){if(requestAnimationFrame(s,p.canvas),void 0===p._fps)l();else{var t=Date.now(),e=t-p._startTime;for(e>1e3&&(e=p._frameDuration),p._startTime=t,p._lag+=e;p._lag>=p._frameDuration;)a(),l(),p._lag-=p._frameDuration;var i=p._lag/p._frameDuration;p.render(p.canvas,i)}}function a(){function t(e){e._previousX=e.x,e._previousY=e.y,e.children&&e.children.length>0&&e.children.forEach(function(e){t(e)})}p.stage.children.forEach(function(e){t(e)})}function l(){if(p.buttons.length>0){p.canvas.style.cursor="auto";for(var t=p.buttons.length-1;t>=0;t--){var e=p.buttons[t];e.update(p.pointer,p.canvas),"over"!==e.state&&"down"!==e.state||e.stage||(p.canvas.style.cursor="pointer")}}if(p.dragAndDrop&&p.pointer.updateDragAndDrop(),p.state&&!p.paused&&p.state(),0!==p.updateFunctions.length)for(var i=0;i<p.updateFunctions.length;i++){var r=p.updateFunctions[i];r()}}function u(t){t.x=0,t.y=0,t.vx=0,t.vy=0,t.width=0,t.height=0,t.scaleX=1,t.scaleY=1,t.pivotX=.5,t.pivotY=.5,t.rotation=0,t.visible=!0,t.parent=void 0,t.stage=!1,t.shadow=!1,t.shadowColor="rgba(100, 100, 100, 0.5)",t.shadowOffsetX=3,t.shadowOffsetY=3,t.shadowBlur=3,t.blendMode=void 0,t._alpha=1,t._draggable=void 0,t._layer=0,t._circular=!1,t._interactive=!1,t._previousX=void 0,t._previousY=void 0,t.children=[],t.addChild=function(e){e.parent&&e.parent.removeChild(e),e.parent=t,t.children.push(e)},t.removeChild=function(e){if(e.parent!==t)throw new Error(e+"is not a child of "+t);t.children.splice(t.children.indexOf(e),1)};var e=t;t.putTop=function(i,r,o){r=r||0,o=o||0,i.x=e.x+e.halfWidth-i.halfWidth+r,i.y=e.y-i.height+o,t.compensateForParentPosition(e,i)},t.putRight=function(i,r,o){r=r||0,o=o||0,i.x=e.x+e.width+r,i.y=e.y+e.halfHeight-i.halfHeight+o,t.compensateForParentPosition(e,i)},t.putBottom=function(i,r,o){r=r||0,o=o||0,i.x=e.x+e.halfWidth-i.halfWidth+r,i.y=e.y+e.height+o,t.compensateForParentPosition(e,i)},t.putLeft=function(i,r,o){r=r||0,o=o||0,i.x=e.x-i.width+r,i.y=e.y+e.halfHeight-i.halfHeight+o,t.compensateForParentPosition(e,i)},t.compensateForParentPosition=function(t,e){0===e.parent.gx&&0===e.parent.gy||(e.x-=t.gx,e.y-=t.gy)},Object.defineProperties(t,{gx:{get:function(){return this.parent?this.x+this.parent.gx:this.x},enumerable:!0,configurable:!0},gy:{get:function(){return this.parent?this.y+this.parent.gy:this.y},enumerable:!0,configurable:!0},position:{get:function(){return{x:t.x,y:t.y}},enumerable:!0,configurable:!0},alpha:{get:function(){return t.parent._alpha*t._alpha},set:function(e){t._alpha=e},enumerable:!0,configurable:!0},halfWidth:{get:function(){return t.width/2},enumerable:!0,configurable:!0},halfHeight:{get:function(){return t.height/2},enumerable:!0,configurable:!0},centerX:{get:function(){return t.x+t.halfWidth},enumerable:!0,configurable:!0},centerY:{get:function(){return t.y+t.halfHeight},enumerable:!0,configurable:!0},layer:{get:function(){return t._layer},set:function(e){t._layer=e,t.parent.children.sort(f)},enumerable:!0,configurable:!0},circular:{get:function(){return t._circular},set:function(e){!0===e&&!1===t._circular&&(c(t),t._circular=!0),!1===e&&!0===t._circular&&(delete t.diameter,delete t.radius,t._circular=!1)},enumerable:!0,configurable:!0},localBounds:{get:function(){return{x:0,y:0,width:t.width,height:t.height}},enumerable:!0,configurable:!0}})}function c(t){Object.defineProperties(t,{diameter:{get:function(){return t.width},set:function(e){t.width=e,t.height=e},enumerable:!0,configurable:!0},radius:{get:function(){return t.width/2},set:function(e){t.width=2*e,t.height=2*e},enumerable:!0,configurable:!0}})}function h(t){var e={};return e.code=t,e.isDown=!1,e.isUp=!0,e.press=void 0,e.release=void 0,e.downHandler=function(t){t.keyCode===e.code&&(e.isUp&&e.press&&e.press(),e.isDown=!0,e.isUp=!1),t.preventDefault()},e.upHandler=function(t){t.keyCode===e.code&&(e.isDown&&e.release&&e.release(),e.isDown=!1,e.isUp=!0),t.preventDefault()},window.addEventListener("keydown",e.downHandler.bind(e),!1),window.addEventListener("keyup",e.upHandler.bind(e),!1),e}function f(t,e){return t.layer<e.layer?-1:(t.layer,e.layer,1)}var p={};if(p.canvas=document.createElement("canvas"),p.canvas.setAttribute("width",1*t),p.canvas.setAttribute("height",1*e),p.canvas.style.backgroundColor="black",document.body.appendChild(p.canvas),p.canvas.ctx=p.canvas.getContext("2d"),p.stage=function(){var t={};return u(t),t.stage=!0,t.width=p.canvas.width,t.height=p.canvas.height,t.x=0,t.y=0,t.parent=void 0,t}(),p.key=function(){var t={};return t.leftArrow=h(37),t.upArrow=h(38),t.rightArrow=h(39),t.downArrow=h(40),t.space=h(32),t}(),p.buttons=[],p.dragAndDrop=!1,p.draggableSprites=[],p.tweens=[],p.state=void 0,p.load=n||void 0,p.setup=r||void 0,void 0===p.setup)throw new Error("Please supply the setup function in the constructor");return p.assetFilePaths=o||void 0,p.paused=!1,p._fps=60,p._startTime=Date.now(),p._frameDuration=1e3/p._fps,p._lag=0,p.interpolate=!0,p.updateFunctions=[],p.scale=1,p.start=function(){p.assetFilePaths?(p.assets.whenLoaded=function(){p.state=void 0,p.setup()},p.assets.load(p.assetFilePaths),p.load&&(p.state=p.load)):p.setup(),s()},p.pause=function(){p.paused=!0},p.resume=function(){p.paused=!1},p.hidePointer=function(){p.canvas.style.cursor="none"},p.showPointer=function(){p.canvas.style.cursor="auto"},Object.defineProperties(p,{fps:{get:function(){return p._fps},set:function(t){p._fps=t,p._startTime=Date.now(),p._frameDuration=1e3/p._fps},enumerable:!0,configurable:!0},backgroundColor:{set:function(t){p.canvas.style.backgroundColor=t},enumerable:!0,configurable:!0}}),p.remove=function(t){var e=Array.prototype.slice.call(arguments);if(e[0]instanceof Array){var i=e[0];if(i.length>0)for(var r=i.length-1;r>=0;r--){var o=i[r];o.parent.removeChild(o),i.splice(i.indexOf(o),1)}}else e.length>1?e.forEach(function(t){t.parent.removeChild(t)}):e[0].parent.removeChild(e[0])},p.rectangle=function(t,e,i,r,o,n,s){var a={};return u(a),a.mask=!1,a.width=t||32,a.height=e||32,a.fillStyle=i||"red",a.strokeStyle=r||"none",a.lineWidth=o||0,a.x=n||0,a.y=s||0,p.stage.addChild(a),a.render=function(t){t.strokeStyle=a.strokeStyle,t.lineWidth=a.lineWidth,t.fillStyle=a.fillStyle,t.beginPath(),t.rect(-a.width*a.pivotX,-a.height*a.pivotY,a.width,a.height),!0===a.mask?t.clip():("none"!==a.strokeStyle&&t.stroke(),"none"!==a.fillStyle&&t.fill())},a},p.circle=function(t,e,i,r,o,n){var s={};return u(s),s.mask=!1,s.width=t||32,s.height=t||32,s.fillStyle=e||"red",s.strokeStyle=i||"none",s.lineWidth=r||"none",s.x=o||0,s.y=n||0,p.stage.addChild(s),c(s),s.render=function(t){t.strokeStyle=s.strokeStyle,t.lineWidth=s.lineWidth,t.fillStyle=s.fillStyle,t.beginPath(),t.arc(s.radius+-s.diameter*s.pivotX,s.radius+-s.diameter*s.pivotY,s.radius,0,2*Math.PI,!1),!0===s.mask?t.clip():("none"!==s.strokeStyle&&t.stroke(),"none"!==s.fillStyle&&t.fill())},s},p.text=function(t,e,i,r,o){var n={};return u(n),n.content=t||"Hello!",n.font=e||"12px sans-serif",n.fillStyle=i||"red",n.textBaseline="top",Object.defineProperties(n,{width:{get:function(){return p.canvas.ctx.measureText(n.content).width},enumerable:!0,configurable:!0},height:{get:function(){return p.canvas.ctx.measureText("M").width},enumerable:!0,configurable:!0}}),p.stage.addChild(n),n.x=r||0,n.y=o||0,n.render=function(t){t.strokeStyle=n.strokeStyle,t.lineWidth=n.lineWidth,t.fillStyle=n.fillStyle,0===n.width&&(n.width=t.measureText(n.content).width),0===n.height&&(n.height=t.measureText("M").width),t.translate(-n.width*n.pivotX,-n.height*n.pivotY),t.font=n.font,t.textBaseline=n.textBaseline,t.fillText(n.content,0,0)},n},p.render=function(t,e){function i(o){if(o.visible&&o.gx<t.width+o.width&&o.gx+o.width>=-o.width&&o.gy<t.height+o.height&&o.gy+o.height>=-o.height){if(r.save(),p.interpolate?(void 0!==o._previousX?o.renderX=(o.x-o._previousX)*e+o._previousX:o.renderX=o.x,void 0!==o._previousY?o.renderY=(o.y-o._previousY)*e+o._previousY:o.renderY=o.y):(o.renderX=o.x,o.renderY=o.y),r.translate(o.renderX+o.width*o.pivotX,o.renderY+o.height*o.pivotY),r.globalAlpha=o.alpha,r.rotate(o.rotation),r.scale(o.scaleX,o.scaleY),o.shadow&&(r.shadowColor=o.shadowColor,r.shadowOffsetX=o.shadowOffsetX,r.shadowOffsetY=o.shadowOffsetY,r.shadowBlur=o.shadowBlur),o.blendMode&&(r.globalCompositeOperation=o.blendMode),o.render&&o.render(r),o.children&&o.children.length>0){r.translate(-o.width*o.pivotX,-o.height*o.pivotY);for(var n=0;n<o.children.length;n++){i(o.children[n])}}r.restore()}}var r=t.ctx;r.clearRect(0,0,t.width,t.height);for(var o=0;o<p.stage.children.length;o++){i(p.stage.children[o])}},p.keyboard=h,p.makeDisplayObject=u,void 0!==i.plugins&&i.plugins(p),void 0!==i.custom&&i.custom(p),p},window.ga=i.create,window.GA=i},function(t,e){function i(){this.setSettings=function(t){for(var e=0;e<24;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var i=this.b+this.c+this.e;if(i<.18){var r=.18/i;this.b*=r,this.c*=r,this.e*=r}}}function r(){this._params=new i;var t,e,r,o,n,s,a,l,u,c,h,f;this.reset=function(){var t=this._params;o=100/(t.f*t.f+.001),n=100/(t.g*t.g+.001),s=1-t.h*t.h*t.h*.01,a=-t.i*t.i*t.i*1e-6,t.a||(h=.5-t.n/2,f=5e-5*-t.o),l=1+t.l*t.l*(t.l>0?-.9:10),u=0,c=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.reset();var i=this._params;return t=i.b*i.b*1e5,e=i.c*i.c*1e5,r=i.e*i.e*1e5+12,3*((t+e+r)/3|0)},this.synthWave=function(i,p){var d=this._params,g=1!=d.s||d.v,v=d.v*d.v*.1,y=1+3e-4*d.w,b=d.s*d.s*d.s*.1,m=1+1e-4*d.t,w=1!=d.s,x=d.x*d.x,_=d.g,k=d.q||d.r,O=d.r*d.r*d.r*.2,T=d.q*d.q*(d.q<0?-1020:1020),P=d.p?32+((1-d.p)*(1-d.p)*2e4|0):0,S=d.d,C=d.j/2,M=d.k*d.k*.01,B=d.a,j=t,E=1/t,H=1/e,I=1/r,D=5/(1+d.u*d.u*20)*(.01+b);D>.8&&(D=.8),D=1-D;for(var A,W,F,G,L,R,U=!1,X=0,Y=0,N=0,Z=0,V=0,z=0,q=0,J=0,K=0,Q=0,$=new Array(1024),tt=new Array(32),et=$.length;et--;)$[et]=0;for(var et=tt.length;et--;)tt[et]=2*Math.random()-1;for(var et=0;et<p;et++){if(U)return et;if(P&&++K>=P&&(K=0,this.reset()),c&&++u>=c&&(c=0,o*=l),s+=a,o*=s,o>n&&(o=n,_>0&&(U=!0)),W=o,C>0&&(Q+=M,W*=1+Math.sin(Q)*C),W|=0,W<8&&(W=8),B||(h+=f,h<0?h=0:h>.5&&(h=.5)),++Y>j)switch(Y=0,++X){case 1:j=e;break;case 2:j=r}switch(X){case 0:N=Y*E;break;case 1:N=1+2*(1-Y*H)*S;break;case 2:N=1-Y*I;break;case 3:N=0,U=!0}k&&(T+=O,F=0|T,F<0?F=-F:F>1023&&(F=1023)),g&&y&&(v*=y,v<1e-5?v=1e-5:v>.1&&(v=.1)),R=0;for(var it=8;it--;){if(++q>=W&&(q%=W,3==B))for(var rt=tt.length;rt--;)tt[rt]=2*Math.random()-1;switch(B){case 0:L=q/W<h?.5:-.5;break;case 1:L=1-q/W*2;break;case 2:G=q/W,G=6.28318531*(G>.5?G-1:G),L=1.27323954*G+.405284735*G*G*(G<0?1:-1),L=.225*((L<0?-1:1)*L*L-L)+L;break;case 3:L=tt[Math.abs(32*q/W|0)]}g&&(A=z,b*=m,b<0?b=0:b>.1&&(b=.1),w?(V+=(L-z)*b,V*=D):(z=L,V=0),z+=V,Z+=z-A,Z*=1-v,L=Z),k&&($[J%1024]=L,L+=$[(J-F+1024)%1024],J++),R+=L}R*=.125*N*x,i[et]=R>=1?32767:R<=-1?-32768:32767*R|0}return p}}var o=new r;window.jsfxr=function(t){o._params.setSettings(t);var e=o.totalReset(),i=new Uint8Array(4*((e+1)/2|0)+44),r=2*o.synthWave(new Uint16Array(i.buffer,44),e),n=new Uint32Array(i.buffer,0,44);n[0]=1179011410,n[1]=r+36,n[2]=1163280727,n[3]=544501094,n[4]=16,n[5]=65537,n[6]=44100,n[7]=88200,n[8]=1048578,n[9]=1635017060,n[10]=r,r+=44;for(var s=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l="data:audio/wav;base64,";s<r;s+=3){var u=i[s]<<16|i[s+1]<<8|i[s+2];l+=a[u>>18]+a[u>>12&63]+a[u>>6&63]+a[63&u]}return l}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(4),s=function(t){return t&&t.__esModule?t:{default:t}}(n),a=i(2),l=function(){function t(e){r(this,t),this.g=e,this.items=[],this.cursorPos=0,this.textUtil=new s.default(e),this.textSize=48,this.spacing=64,this.initInput()}return o(t,[{key:"initInput",value:function(){var t=this;this.controls=(0,a.getPlayerControls)(this.g,1),this.controls.up.press=function(){0===t.cursorPos?t.cursorPos=t.items.length-1:t.cursorPos-=1},this.controls.down.press=function(){t.cursorPos===t.items.length-1?t.cursorPos=0:t.cursorPos+=1},this.controls.action.press=function(){t.textUtil.clear(),t.controls.action.press=null,t.items[t.cursorPos].callback()}}},{key:"setYPosition",value:function(t){this.y=t}},{key:"addItem",value:function(t,e){this.items.push({text:t,callback:e})}},{key:"draw",value:function(){this.cursor||(this.texts=this.textUtil.centeredTexts(this.items.map(function(t){return t.text}),this.textSize,"#000000",this.y,this.spacing),this.cursor=this.textUtil.createText("=>",this.textSize,"#000000",this.texts[0].x-this.spacing,this.y+this.spacing*this.cursorPos)),this.cursor.y=this.y+this.spacing*this.cursorPos}}]),t}();e.default=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();i(14);var n=function(){function t(){var e=this;r(this,t),this.soundUrls={hit1:jsfxr([2,,.0976,.2877,.1658,.2279,,-.0955,.1895,.1427,.1006,.0542,.0642,.1476,.0347,.06,-.011,-.2045,.9872,.1328,.2049,.0809,.1951,.5]),hit2:jsfxr([2,,.1217,,.3064,.549,.0183,-.5849,,,,,,.7132,-.2861,,.1225,-.0788,1,,,.1491,,.5]),hit3:jsfxr([0,,.157,,.0593,.4355,.0211,-.6071,,,,,,.4496,-.2923,,.1523,-.1522,1,,,,,.5]),hit4:jsfxr([0,7e-4,.4868,.0061,.0718,.1771,,.6584,.0703,-.1702,,-.0806,.9316,,,,-.1748,-2e-4,.2961,-.6519,,.1049,-.6746,.5]),pit1:jsfxr([2,.0058,.01,.4566,.8036,.5835,,-2e-4,.3292,.7897,-.4659,.6245,.2038,-.8218,-.0847,,.56,-.3056,.5838,.0861,,,.0104,.5]),pit2:jsfxr([0,,.2612,,.3432,.2269,,.2139,,,,,,.5027,,.5871,,,1,,,,,.5])},this.sounds={},Object.keys(this.soundUrls).forEach(function(t){e.sounds[t]=[new Audio(e.soundUrls[t]),new Audio(e.soundUrls[t])]})}return o(t,[{key:"play",value:function(t){this.sounds[t][0].paused?this.sounds[t][0].play():this.sounds[t][1].paused&&this.sounds[t][1].play()}}]),t}();e.default=n},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=i(4),n=r(o),s=i(8),a=r(s),l=i(18),u=r(l),c=i(1),h=(r(c),i(2),i(19));t.exports=function(t){var e=t.globals.roundScore;t.things.forEach(function(t){return t.remove()});var i=Object.keys(e).map(function(t){return{color:t,score:e[t]}}).sort(function(t,e){return e.score-t.score}),r=i.reduce(function(t,e){return e.color.length>t?e.color.length:t},i[0].color.length),o=i.reduce(function(t,e){return e.score.toString().length>t?e.score.toString().length:t},i[0].score.toString().length),s=new n.default(t);s.centeredText("ROUND SCORE",48,"#000000",128);var l=i.map(function(t){var e=t.score,i=t.color;return(0,h.rpad)(""+i,r+1)+(0,h.lpad)(""+e,o)});s.centeredTexts(l,36,"#000000",192,48);var c=i[0].color;t.globals.roundsWon[c]+=1,s.centeredText(c.toUpperCase()+" WINS THE ROUND!",48,"#000000",32),s.centeredText("ROUNDS WON",48,"#000000",412);var f=Object.keys(t.globals.roundsWon).map(function(e){return(0,h.rpad)(""+e,r+1)+t.globals.roundsWon[e]});return s.centeredTexts(f,36,"#000000",480,48),t.wait(4e3,function(){s.clear(),3===t.globals.roundsWon[c]?t.state=(0,u.default)(t,c):t.state=(0,a.default)(t)}),function(){}}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=i(4),n=r(o),s=i(9),a=r(s);t.exports=function(t,e){var i=(t.globals.roundScore,new n.default(t));return i.centeredText(e.toUpperCase()+" WINS THE GAME!",48,"#000000",128),t.wait(4e3,function(){i.clear(),t.state=(0,a.default)(t)}),function(){}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return Array(Math.max(0,t)).fill(e).join("")};e.rpad=function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t+i(e-t.length)},e.lpad=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return i(e-t.length,r)+t}}]);